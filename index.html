<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plínio Stúdio • Gerador Cinematográfico IA</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    /* ---------- Root & Fonts ---------- */
    :root{
      --bg-dark: #0b0b0d;
      --card: rgba(18,18,24,0.86);
      --accent: #f3c76b;
      --muted: #bdbdbf;
      --glass: rgba(255,255,255,0.03);
      --film-grad: linear-gradient(90deg, rgba(0,0,0,0.6), rgba(0,0,0,0.15));
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:radial-gradient(1200px 800px at 10% 10%, rgba(124,58,237,0.06), transparent), var(--bg-dark); color:#fff; -webkit-font-smoothing:antialiased}

    /* ---------- 35mm Loader Overlay ---------- */
    .loader-wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;background:linear-gradient(180deg, rgba(7,7,9,0.95), rgba(7,7,9,0.85));backdrop-filter: blur(6px)}
    .loader-card{width:min(820px,94%);padding:2.2rem;border-radius:18px;background:linear-gradient(180deg, rgba(10,10,14,0.8), rgba(15,15,20,0.55));border:1px solid rgba(255,255,255,0.03);box-shadow:0 20px 60px rgba(0,0,0,0.7);position:relative;overflow:hidden}

    /* Film texture */
    .loader-card::before{content:'';position:absolute;inset:-40% -20% auto -20%;height:220%;background:repeating-linear-gradient(0deg, rgba(255,255,255,0.02) 0px, rgba(255,255,255,0.00) 1px);mix-blend-mode:overlay;opacity:0.6;pointer-events:none}
    .grain{pointer-events:none;position:absolute;inset:0;mix-blend-mode:overlay;opacity:0.18;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><filter id="g"><feTurbulence baseFrequency="0.9" numOctaves="2" stitchTiles="stitch"/><feColorMatrix type="saturate" values="0"/></filter><rect width="100%" height="100%" filter="url(%23g)" /></svg>')}
    .vignette{position:absolute;inset:0;background:radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,0) 40%, rgba(0,0,0,0.6) 100%);pointer-events:none}

    /* Scanline flicker */
    .scanlines{position:absolute;inset:0;background-image:linear-gradient(transparent 92%, rgba(255,255,255,0.02) 93%);background-size:100% 4px;mix-blend-mode:overlay;opacity:0.45;pointer-events:none;animation:scan 3s linear infinite}
    @keyframes scan{0%{transform:translateY(0)}100%{transform:translateY(-4px)}}

    /* Loader content */
    .loader-title{font-weight:800;font-size:1.6rem;letter-spacing:1px;color:var(--accent);text-shadow:0 6px 18px rgba(0,0,0,0.6)}
    .loader-sub{color:var(--muted);margin-top:0.5rem;font-size:0.95rem}

    .style-belt{display:flex;gap:.6rem;margin-top:1.1rem;flex-wrap:wrap}
    .style-pill{padding:.5rem .8rem;border-radius:999px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.03);font-weight:700;font-size:.86rem;color:var(--muted)}

    .film-strip{margin-top:1.6rem;height:64px;border-radius:8px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:center;gap:1rem;padding:0.6rem 0.8rem}
    .film-thumb{flex:0 0 86px;height:48px;background:linear-gradient(90deg, rgba(0,0,0,0.3), rgba(255,255,255,0.02));border-radius:6px;display:flex;align-items:center;justify-content:center;font-weight:700;color:var(--muted)}
    .film-meta{flex:1}
    .film-meta p{margin:0;font-size:.92rem;color:var(--muted)}

    .loader-footer{display:flex;gap:1rem;align-items:center;justify-content:space-between;margin-top:1.2rem}
    .loader-progress{flex:1;height:10px;border-radius:10px;background:rgba(255,255,255,0.03);overflow:hidden;margin-right:1rem}
    .loader-progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ffffff08,#ffffff22,#ffffff08);animation:progress 3.5s linear forwards}
    @keyframes progress{to{width:100%}}

    .loader-small{font-size:0.85rem;color:var(--muted);font-weight:600}

    /* ---------- Main App (under loader) ---------- */
    header{padding:2rem 1rem;text-align:center;position:relative}
    .logo{font-size:2.2rem;font-weight:800;background:linear-gradient(90deg,#f3c76b,#ffd88a);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
    .subtitle{color:var(--muted);margin-top:.3rem}

    .container{max-width:920px;margin:2rem auto;padding:0 1rem}
    .card{background:var(--card);border-radius:18px;padding:2rem;border:1px solid rgba(255,255,255,0.03);box-shadow:0 25px 60px rgba(0,0,0,0.6)}
    .row{display:flex;gap:1rem;align-items:center}

    label{display:block;margin-bottom:.6rem;font-weight:700;color:#fff}
    input[type=text], textarea, select{width:100%;padding:1rem;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);color:#fff}
    textarea{min-height:160px;font-family:inherit}

    .btn{display:inline-flex;align-items:center;gap:.6rem;padding:.9rem 1.2rem;border-radius:10px;border:none;background:linear-gradient(90deg,#f3c76b,#ffd88a);color:#111;font-weight:800;cursor:pointer}
    .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);font-weight:700}

    .styles-list{display:flex;gap:.6rem;flex-wrap:wrap;margin-top:.6rem}
    .style{padding:.45rem .7rem;border-radius:999px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-weight:700;color:var(--muted);cursor:pointer}
    .style.active{background:linear-gradient(90deg,#f3c76b,#ffd88a);color:#111}

    .result-box{margin-top:1rem;border-radius:10px;padding:1rem;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}
    .result-box pre{white-space:pre-wrap;color:#fff;font-weight:600}

    .note{font-size:0.9rem;color:var(--muted);margin-top:.6rem}

    /* Responsive */
    @media(max-width:720px){.row{flex-direction:column}.film-thumb{display:none}}

  </style>
</head>
<body>
  <!-- Loader Overlay (35mm film style) -->
  <div class="loader-wrap" id="loader">
    <div class="loader-card" role="dialog" aria-label="Tela de Inicialização Cinematográfica">
      <div class="grain" aria-hidden="true"></div>
      <div class="vignette" aria-hidden="true"></div>
      <div class="scanlines" aria-hidden="true"></div>

      <div style="position:relative;z-index:3">
        <div class="loader-title"><i class="fa-solid fa-film"></i> Carregando o gerador cinematográfico IA...</div>
        <div class="loader-sub">Aperfeiçoando sua ideia para prompts profissionais — modo 35mm</div>

        <div class="style-belt" aria-hidden="true">
          <div class="style-pill">Cinematográfico</div>
          <div class="style-pill">Futurista</div>
          <div class="style-pill">Realista</div>
          <div class="style-pill">Estúdio Fotográfico</div>
          <div class="style-pill">Dramático</div>
          <div class="style-pill">Automático</div>
        </div>

        <div class="film-strip" aria-hidden="true">
          <div class="film-thumb">35mm</div>
          <div class="film-meta">
            <p><strong>Gerador:</strong> Plínio Stúdio — Cinematic Prompt Engine</p>
            <p style="margin-top:.25rem;color:var(--muted)">Exibe estilos variados enquanto o sistema calibra o prompt.</p>
          </div>
        </div>

        <div class="loader-footer">
          <div class="loader-progress" aria-hidden="true"><i></i></div>
          <div class="loader-small">Pronto em instantes...</div>
        </div>
      </div>
    </div>
  </div>

  <!-- MAIN APP -->
  <header>
    <div class="logo"><i class="fa-solid fa-video"></i> Plínio Stúdio</div>
    <div class="subtitle">Gerador Cinematográfico - modo 35mm</div>
  </header>

  <main class="container">
    <!-- Login Card -->
    <section class="card" id="loginCard">
      <div style="display:flex;align-items:center;gap:1rem;margin-bottom:1rem">
        <div style="background:rgba(255,255,255,0.03);padding:.6rem;border-radius:10px"><i class="fa-solid fa-lock"></i></div>
        <div>
          <div style="font-weight:800">Acesso Premium</div>
          <div style="color:var(--muted);font-size:.95rem">Insira sua senha para acessar o gerador ou use a versão gratuita limitada.</div>
        </div>
      </div>

      <div class="row" style="margin-top:0.8rem">
        <div style="flex:1">
          <label for="senha">Senha de Acesso</label>
          <input id="senha" type="text" placeholder="Digite sua senha (admin123 / transforma)" onkeypress="if(event.key==='Enter') verificarSenha()">
        </div>
        <div>
          <button class="btn" onclick="verificarSenha()"><i class="fa-solid fa-unlock"></i> Entrar</button>
        </div>
      </div>

      <div class="note">Senha <strong>admin123</strong> = Acesso ilimitado. Senha <strong>transforma</strong> = 1 geração por 24h.</div>
    </section>

    <!-- Generator Card (hidden until login) -->
    <section class="card" id="generatorCard" style="margin-top:1.4rem;display:none">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1rem">
        <div style="display:flex;gap:1rem;align-items:center">
          <div style="background:rgba(255,255,255,0.03);padding:.6rem;border-radius:10px"><i class="fa-solid fa-check-circle"></i></div>
          <div>
            <div style="font-weight:800">Gerador Cinematográfico</div>
            <div style="color:var(--muted);font-size:.95rem">Digite sua ideia simples e obtenha um prompt otimizado.</div>
          </div>
        </div>
        <div style="color:var(--muted);font-weight:700">Modo 35mm · Aprimoramento técnico automático</div>
      </div>

      <div>
        <label for="inputIdea">Digite sua ideia (ex: "homem tocando violão no pôr do sol")</label>
        <input id="inputIdea" type="text" placeholder="Escreva aqui sua frase simples..." onkeypress="if(event.key==='Enter') gerarPrompt()">
      </div>

      <div style="margin-top:1rem">
        <label>Escolha o estilo desejado</label>
        <div class="styles-list" id="stylesList">
          <div class="style active" data-style="cinematic">Cinematográfico</div>
          <div class="style" data-style="futuristic">Futurista</div>
          <div class="style" data-style="realistic">Realista</div>
          <div class="style" data-style="studio">Estúdio Fotográfico</div>
          <div class="style" data-style="dramatic">Dramático</div>
          <div class="style" data-style="automatic">Automático</div>
        </div>
      </div>

      <div style="margin-top:1rem;display:flex;gap:1rem;align-items:center">
        <button class="btn" onclick="gerarPrompt()"><i class="fa-solid fa-magic"></i> Gerar Prompt</button>
        <button class="btn secondary" onclick="copiarResultado()"><i class="fa-solid fa-copy"></i> Copiar</button>
        <div style="margin-left:auto;color:var(--muted);font-weight:700" id="usageTag">Grátis disponível</div>
      </div>

      <div class="result-box" id="resultBox" style="display:none;margin-top:1rem">
        <label>Prompt Gerado</label>
        <pre id="resultText" aria-live="polite"></pre>
      </div>

      <div class="note">Observação: O gerador <strong>aperfeiçoa tecnicamente</strong> a sua frase adicionando detalhes de composição, iluminação, lentes, resolução e atmosferas adequadas ao estilo selecionado.</div>
    </section>
  </main>

  <footer style="text-align:center;padding:2rem 1rem;color:var(--muted);border-top:1px solid rgba(255,255,255,0.02);margin-top:3rem">© 2025 Plínio Stúdio • Todos os direitos reservados</footer>

  <script>
    // ---------- Loader behavior ----------
    document.addEventListener('DOMContentLoaded', () => {
      // Show loader for ~3.5s then hide
      const loader = document.getElementById('loader');
      setTimeout(() => {
        loader.style.transition = 'opacity 400ms ease';
        loader.style.opacity = '0';
        setTimeout(() => loader.remove(), 450);
      }, 3500);

      // Styles selection toggles
      document.querySelectorAll('.styles-list .style').forEach(el => {
        el.addEventListener('click', () => {
          document.querySelectorAll('.styles-list .style').forEach(s=>s.classList.remove('active'));
          el.classList.add('active');
        });
      });
    });

    // ---------- Access control (same logic) ----------
    function verificarSenha(){
      const senha = document.getElementById('senha').value.trim();
      const agora = Date.now();
      const ultima = localStorage.getItem('acessoPlinio');
      const vinteQuatro = 24*60*60*1000;

      if(senha === 'admin123'){
        abrirGerador('Admin');
        return;
      }

      if(senha === 'transforma'){
        if(ultima && agora - parseInt(ultima) < vinteQuatro){
          const horas = Math.ceil((vinteQuatro - (agora - parseInt(ultima)))/3600000);
          alert('Acesso já usado. Próximo em '+horas+'h');
          return;
        }
        localStorage.setItem('acessoPlinio', agora);
        abrirGerador('Grátis');
        return;
      }

      alert('Senha incorreta. Use admin123 ou transforma.');
    }

    function abrirGerador(tag){
      document.getElementById('loginCard').style.display='none';
      document.getElementById('generatorCard').style.display='block';
      document.getElementById('usageTag').textContent = tag === 'Admin' ? 'Acesso: Ilimitado' : 'Acesso: 1 geração / 24h';
      document.getElementById('inputIdea').focus();
    }

    // ---------- Prompt generation logic ----------
    function gerarPrompt(){
      const idea = document.getElementById('inputIdea').value.trim();
      if(!idea){alert('Digite uma ideia simples para gerar o prompt.');return}

      const style = document.querySelector('.styles-list .style.active').dataset.style || 'cinematic';
      const optimized = aperfeicoarFrase(idea, style);

      document.getElementById('resultBox').style.display='block';
      document.getElementById('resultText').textContent = optimized;
    }

    function copiarResultado(){
      const txt = document.getElementById('resultText').textContent;
      if(!txt){alert('Nada para copiar — gere um prompt primeiro.');return}
      navigator.clipboard.writeText(txt).then(()=>{alert('Prompt copiado!')}).catch(()=>{alert('Não foi possível copiar automaticamente. Selecione e copie manualmente.')});
    }

    // Intelligent improvement function — rules-based with templates
    function aperfeicoarFrase(frase, estilo){
      // sanitize
      const clean = frase.replace(/\s+/g,' ').trim();

      // Base descriptors extracted from user's words (very simple NLP-ish)
      const parts = clean.split(/,| and | e | com | - /i).map(s=>s.trim()).filter(Boolean);
      const subject = parts[0] || clean;

      // lens, resolution, camera descriptors
      const baseTech = '8K, ultra-detailed, shallow depth of field, cinematic composition, professional color grading, film grain subtle';

      const descriptorsByStyle = {
        cinematic: 'anamorphic lens, golden hour lighting, volumetric lighting, dramatic framing, soft film halation',
        futuristic: 'neon rim light, chromatic aberration, holographic reflections, cyberpunk palette, dynamic lens flares',
        realistic: 'natural lighting, photorealistic textures, true-to-life skin tones, accurate shadows, documentary feel',
        studio: 'controlled strobe lighting, softbox, high-key studio backdrops, crisp details, shallow bokeh',
        dramatic: 'high contrast, rim lighting, strong chiaroscuro, moody color grading, emotional close-ups',
        automatic: 'balanced lighting, neutral color profile, optimized sharpness, general-purpose cinematic polish'
      };

      const styleDesc = descriptorsByStyle[estilo] || descriptorsByStyle.cinematic;

      // Try to pick a subject noun and location/action hints
      // naive extraction
      let action = ''; let subjectNoun = subject;
      const mAction = subject.match(/(tocando|cantando|correndo|falando|olhando|brincando|carregando|andando|dançando|tocando violão|tocando guitarra|tocando piano|cantor|música|cantora)/i);
      if(mAction) action = mAction[0];

      // Build final prompt
      const promptParts = [];
      promptParts.push('Cinematic 35mm style prompt:');
      promptParts.push(`Scene: ${subjectNoun}.`);
      promptParts.push(`Action: ${action || 'natural performance'}.`);
      promptParts.push(`Visual: ${styleDesc}.`);
      promptParts.push(`Technical: ${baseTech}, lens: 50mm/85mm suggested, film grain: fine.`);
      promptParts.push('Mood: evocative, immersive, storytelling composition.');
      promptParts.push('Language: produce in English prompts for image/video generators.');

      return promptParts.join(' ');
    }
  </script>
</body>
</html>
